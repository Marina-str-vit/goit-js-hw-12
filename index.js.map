{"version":3,"file":"index.js","sources":["../src/img/Group_rej.png","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEYSURBVHgBrZZRDoIwDIYrwfDqTeQo3ohxEr0BXsW77GXFOFdkYcC6DuFPCJB1/7fCWgBgZEzfIPY256BYzqfkzE8nUNbCE+DzgqSKK8W6OVBV5xYk+ZUbgw/IFMVKmfxtng3ZYy5CjjBnISlzrXUtGcZiZpDxolsGIWItvTi/OK0xAuk7GhsBRjEGioNMmffMXKNEAAeRzENACYJc8QxF5IuJNBZhS2PSfBGwhNB9rjmpgHxZ5jqprAyC3jT0mi29RwSE5v6xhO9EhAjblN0tqS38G59t02ShKeCzU2Kh+SDE9z0GAUGxGPKaLS4F2aqVudcRENb8CIhovgeSMl/VwdQWbOPOl5yPvivs25b2MWjKJOu3hTX+AgZ5PpvL0NSkAAAAAElFTkSuQmCC\"","import iconReject from '../img/Group_rej.png';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\n\n// const BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '47392107-146a4706033000661fe0e92fb';\n// export const searchQuery = \"\";\n// document.querySelector('.search-input').value.trim();\n\nexport async function fetchImages(searchQuery, page = 1) {\n  try {\n    const response = await axios.get(\n      `https://pixabay.com/api/?key=${API_KEY}&q=${searchQuery}&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=${page}`\n    );\n    return response.data;\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Error while receiving images!',\n      position: 'topRight',\n      iconUrl: iconReject,\n      backgroundColor: '#EF4040',\n      messageColor: 'white',\n      timeout: 3000,\n    });\n    // console.error(error.message);\n\n    document.querySelector('input').value = '';\n  }\n}\n","export function renderSearchForm() {\n  const searchForm = document.createElement('form');\n  searchForm.classList.add('search-form');\n\n  const searchInput = document.createElement('input');\n  searchInput.classList.add('search-input');\n  searchInput.type = 'text';\n  searchInput.id = 'search-input';\n  searchInput.placeholder = 'Search images...';\n\n  const searchButton = document.createElement('button');\n  searchButton.classList.add('search-button');\n  searchButton.type = 'submit';\n  searchButton.textContent = 'Search';\n\n  searchForm.appendChild(searchInput);\n  searchForm.appendChild(searchButton);\n\n  return searchForm;\n}\nexport function renderImageGallery(images) {\n  return images.map(image => {\n    const imageCard = document.createElement('a');\n    imageCard.href = image.largeImageURL;\n    imageCard.classList.add('image-card');\n    const imageElement = document.createElement('img');\n    imageElement.src = image.webformatURL;\n    imageElement.alt = image.tags;\n    imageCard.appendChild(imageElement);\n    const info = document.createElement('div');\n    info.classList.add('info');\n    const likes = document.createElement('p');\n    likes.textContent = `Likes ${image.likes}`;\n    info.appendChild(likes);\n    const views = document.createElement('p');\n    views.textContent = `Views ${image.views}`;\n    info.appendChild(views);\n    const comments = document.createElement('p');\n    comments.textContent = `Comments ${image.comments}`;\n    info.appendChild(comments);\n    const downloads = document.createElement('p');\n    downloads.textContent = `Downloads ${image.downloads}`;\n    info.appendChild(downloads);\n    imageCard.appendChild(info);\n    return imageCard;\n  });\n}\n\nexport function renderImageCard(image) {\n  const imageCard = document.createElement('div');\n  imageCard.classList.add('image-card');\n\n  const imageElement = document.createElement('img');\n  imageElement.src = image.webformatURL;\n  imageElement.alt = image.tags;\n  imageElement.dataset.largeImageURL = image.largeImageURL;\n\n  const info = document.createElement('div');\n  info.classList.add('info');\n\n  const likes = document.createElement('p');\n  likes.classList.add('likes');\n  likes.textContent = `Likes: ${image.likes}`;\n\n  const views = document.createElement('p');\n  views.classList.add('views');\n  views.textContent = `Views: ${image.views}`;\n\n  const comments = document.createElement('p');\n  comments.classList.add('comments');\n  comments.textContent = `Comments: ${image.comments}`;\n\n  const downloads = document.createElement('p');\n  downloads.classList.add('downloads');\n  downloads.textContent = `Downloads: ${image.downloads}`;\n\n  info.appendChild(likes);\n  info.appendChild(views);\n  info.appendChild(comments);\n  info.appendChild(downloads);\n\n  imageCard.appendChild(imageElement);\n  imageCard.appendChild(info);\n\n  return imageCard;\n}\n\nexport function renderLoadMoreButton() {\n  const loadMoreButton = document.createElement('button');\n  loadMoreButton.classList.add('search-button');\n  loadMoreButton.textContent = 'Load more';\n  loadMoreButton.disabled = true;\n  return loadMoreButton;\n}\n\nexport function renderLoader() {\n  const loader = document.createElement('span');\n  loader.classList.add('loader');\n  return loader;\n}\n","import { fetchImages } from './js/pixabay-api';\nimport {\n  renderSearchForm,\n  renderImageGallery,\n  renderLoadMoreButton,\n  renderLoader,\n} from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iconReject from './img/Group_rej.png';\n\nconst main = document.querySelector('main');\n\nconst searchForm = renderSearchForm();\nmain.appendChild(searchForm);\n\nconst gallery = document.createElement('div');\ngallery.classList.add('gallery');\nmain.appendChild(gallery);\n\nconst loadMoreButton = renderLoadMoreButton();\nmain.appendChild(loadMoreButton);\nloadMoreButton.style.display = 'none';\n\nconst loader = renderLoader();\nmain.appendChild(loader);\nloader.style.display = 'none';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n});\n\nlet currentPage = 1;\nlet searchQueryGlobal = '';\nconst imagesPerPage = 15;\n\nsearchForm.addEventListener('submit', async event => {\n  event.preventDefault();\n  loader.style.display = 'block';\n  const searchQuery = document.querySelector('#search-input').value.trim();\n  if (searchQuery === '') {\n    loader.style.display = 'none';\n    iziToast.error({\n      title: 'Error',\n      titleColor: 'white',\n      message: 'Please enter your search query!',\n      position: 'topRight',\n      iconUrl: iconReject,\n      backgroundColor: '#EF4040',\n      messageColor: 'white',\n      timeout: 3000,\n    });\n    return;\n  }\n\n  currentPage = 1;\n  gallery.innerHTML = '';\n  loadMoreButton.style.display = 'none';\n  loadMoreButton.disabled = true;\n  searchQueryGlobal = searchQuery;\n  const images = await fetchImages(searchQuery, currentPage);\n  const imageGallery = renderImageGallery(images.hits);\n  imageGallery.forEach(imageCard => {\n    gallery.appendChild(imageCard);\n    lightbox.refresh();\n  });\n\n  const loaderSpinner = document.querySelector('.loader');\n\n  if (images.hits.length === 0) {\n    iziToast.error({\n      title: 'No results',\n      titleColor: 'white',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      position: 'topRight',\n      iconUrl: iconReject,\n      backgroundColor: '#EF4040',\n      messageColor: 'white',\n      timeout: 3000,\n    });\n    loadMoreButton.style.display = 'none';\n    loader.style.display = 'none';\n  }\n  if (loaderSpinner) {\n    return loaderSpinner.remove();\n  } else {\n    if (images.totalHits <= currentPage * imagesPerPage) {\n      loadMoreButton.style.display = 'none';\n      loader.style.display = 'none';\n      document.querySelector('#search-input').value = '';\n      const messageContainer = document.createElement('div');\n      messageContainer.classList.add('end-of-results-message');\n      const message = document.createElement('p');\n      message.textContent =\n        \"We're sorry, but you've reached the end of search results.\";\n      messageContainer.appendChild(message);\n      gallery.appendChild(messageContainer);\n      lightbox.refresh();\n      return;\n    }\n    loadMoreButton.disabled = images.hits.length < imagesPerPage;\n    if (images.hits.length > 0) {\n      loadMoreButton.style.display = 'block';\n      loader.style.display = 'none';\n    }\n  }\n  document.querySelector('#search-input').value = '';\n});\n\nloadMoreButton.addEventListener('click', async () => {\n  loader.style.display = 'block';\n  currentPage += 1;\n  const images = await fetchImages(searchQueryGlobal, currentPage);\n  const imageGallery = renderImageGallery(images.hits);\n  imageGallery.forEach(imageCard => {\n    gallery.appendChild(imageCard);\n  });\n  const imageCard = gallery.children[0];\n  const imageCardHeight = imageCard.getBoundingClientRect().height;\n  window.scrollBy({\n    top: imageCardHeight * 2,\n    behavior: 'smooth',\n  });\n  lightbox.refresh();\n  loader.style.display = 'none';\n  loadMoreButton.disabled = images.hits.length < imagesPerPage;\n\n  if (images.hits.length === 0) {\n    loadMoreButton.style.display = 'none';\n  }\n  if (images.totalHits <= currentPage * imagesPerPage) {\n    loadMoreButton.style.display = 'none';\n    loader.style.display = 'none';\n    const messageContainer = document.createElement('div');\n    messageContainer.classList = 'end-of-results-message';\n    const message = document.createElement('p');\n    message.textContent =\n      \"We're sorry, but you've reached the end of search results.\";\n    messageContainer.appendChild(message);\n    gallery.appendChild(messageContainer);\n  }\n});\n"],"names":["iconReject","API_KEY","fetchImages","searchQuery","page","axios","iziToast","renderSearchForm","searchForm","searchInput","searchButton","renderImageGallery","images","image","imageCard","imageElement","info","likes","views","comments","downloads","renderLoadMoreButton","loadMoreButton","renderLoader","loader","main","gallery","lightbox","SimpleLightbox","currentPage","searchQueryGlobal","imagesPerPage","event","loaderSpinner","messageContainer","message","imageCardHeight"],"mappings":"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"}