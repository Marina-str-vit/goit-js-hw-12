{"version":3,"file":"index.js","sources":["../src/img/Group_rej.png","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEYSURBVHgBrZZRDoIwDIYrwfDqTeQo3ohxEr0BXsW77GXFOFdkYcC6DuFPCJB1/7fCWgBgZEzfIPY256BYzqfkzE8nUNbCE+DzgqSKK8W6OVBV5xYk+ZUbgw/IFMVKmfxtng3ZYy5CjjBnISlzrXUtGcZiZpDxolsGIWItvTi/OK0xAuk7GhsBRjEGioNMmffMXKNEAAeRzENACYJc8QxF5IuJNBZhS2PSfBGwhNB9rjmpgHxZ5jqprAyC3jT0mi29RwSE5v6xhO9EhAjblN0tqS38G59t02ShKeCzU2Kh+SDE9z0GAUGxGPKaLS4F2aqVudcRENb8CIhovgeSMl/VwdQWbOPOl5yPvivs25b2MWjKJOu3hTX+AgZ5PpvL0NSkAAAAAElFTkSuQmCC\"","import iconReject from '../img/Group_rej.png';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\n\nconst API_KEY = '47392107-146a4706033000661fe0e92fb';\n\nexport async function fetchImages(searchQuery, page = 1) {\n  try {\n    const response = await axios.get(\n      `https://pixabay.com/api/?key=${API_KEY}&q=${searchQuery}&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=${page}`\n    );\n    return response.data;\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Error while receiving images!',\n      position: 'topRight',\n      iconUrl: iconReject,\n      backgroundColor: '#EF4040',\n      messageColor: 'white',\n      timeout: 3000,\n    });\n    document.querySelector('input').value = '';\n  }\n};\n","export function renderSearchForm() {\n  const searchForm = document.createElement('form');\n  searchForm.classList.add('search-form');\n\n  const searchInput = document.createElement('input');\n  searchInput.classList.add('search-input');\n  searchInput.type = 'text';\n  searchInput.id = 'search-input';\n  searchInput.placeholder = 'Search images...';\n\n  const searchButton = document.createElement('button');\n  searchButton.classList.add('search-button');\n  searchButton.type = 'submit';\n  searchButton.textContent = 'Search';\n\n  searchForm.appendChild(searchInput);\n  searchForm.appendChild(searchButton);\n\n  return searchForm;\n}\nexport function renderImageGallery(images) {\n  return images.map(image => {\n    const imageCard = document.createElement('a');\n    imageCard.href = image.largeImageURL;\n    imageCard.classList.add('image-card');\n    const imageElement = document.createElement('img');\n    imageElement.src = image.webformatURL;\n    imageElement.alt = image.tags;\n    imageCard.appendChild(imageElement);\n    const info = document.createElement('div');\n    info.classList.add('info');\n    const likes = document.createElement('p');\n    likes.textContent = `Likes ${image.likes}`;\n    info.appendChild(likes);\n    const views = document.createElement('p');\n    views.textContent = `Views ${image.views}`;\n    info.appendChild(views);\n    const comments = document.createElement('p');\n    comments.textContent = `Comments ${image.comments}`;\n    info.appendChild(comments);\n    const downloads = document.createElement('p');\n    downloads.textContent = `Downloads ${image.downloads}`;\n    info.appendChild(downloads);\n    imageCard.appendChild(info);\n    return imageCard;\n  });\n}\n\nexport function renderImageCard(image) {\n  const imageCard = document.createElement('div');\n  imageCard.classList.add('image-card');\n\n  const imageElement = document.createElement('img');\n  imageElement.src = image.webformatURL;\n  imageElement.alt = image.tags;\n  imageElement.dataset.largeImageURL = image.largeImageURL;\n\n  const info = document.createElement('div');\n  info.classList.add('info');\n\n  const likes = document.createElement('p');\n  likes.classList.add('likes');\n  likes.textContent = `Likes: ${image.likes}`;\n\n  const views = document.createElement('p');\n  views.classList.add('views');\n  views.textContent = `Views: ${image.views}`;\n\n  const comments = document.createElement('p');\n  comments.classList.add('comments');\n  comments.textContent = `Comments: ${image.comments}`;\n\n  const downloads = document.createElement('p');\n  downloads.classList.add('downloads');\n  downloads.textContent = `Downloads: ${image.downloads}`;\n\n  info.appendChild(likes);\n  info.appendChild(views);\n  info.appendChild(comments);\n  info.appendChild(downloads);\n\n  imageCard.appendChild(imageElement);\n  imageCard.appendChild(info);\n\n  return imageCard;\n}\n\nexport function renderLoadMoreButton() {\n  const loadMoreButton = document.createElement('button');\n  loadMoreButton.classList.add('search-button');\n  loadMoreButton.textContent = 'Load more';\n  loadMoreButton.style.display = 'none';\n\n  return loadMoreButton;\n}\n\nexport function renderLoader() {\n  const loader = document.createElement('span');\n  loader.classList.add('loader');\n  return loader;\n}\n","import { fetchImages } from './js/pixabay-api';\nimport {\n  renderSearchForm,\n  renderImageGallery,\n  renderLoadMoreButton,\n  renderLoader,\n} from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iconReject from './img/Group_rej.png';\n\nconst main = document.querySelector('main');\n\nconst searchForm = renderSearchForm();\nmain.appendChild(searchForm);\n\nconst gallery = document.createElement('div');\ngallery.classList.add('gallery');\nmain.appendChild(gallery);\n\nconst loadMoreButton = renderLoadMoreButton();\nmain.appendChild(loadMoreButton);\nloadMoreButton.style.display = 'none';\n\nconst loader = renderLoader();\nmain.appendChild(loader);\nloader.style.display = 'none';\n\nloadMoreButton.addEventListener('click', onLoadMore);\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n});\n\nlet currentPage = 1;\nlet searchQueryGlobal = '';\nconst imagesPerPage = 15;\n\nsearchForm.addEventListener('submit', async event => {\n  event.preventDefault();\n  loader.style.display = 'block';\n  // кнопка не відображається\n  loadMoreButton.style.display = 'none';\n  const searchQuery = document.querySelector('#search-input').value.trim();\n  if (searchQuery === '') {\n    loader.style.display = 'none';\n    iziToast.error({\n      title: 'Error',\n      titleColor: 'white',\n      message: 'Please enter your search query!',\n      position: 'topRight',\n      iconUrl: iconReject,\n      backgroundColor: '#EF4040',\n      messageColor: 'white',\n      timeout: 3000,\n    });\n    return;\n  }\n    currentPage = 1;\n    gallery.innerHTML = '';\n    searchQueryGlobal = searchQuery;\n    try {\n      const images = await fetchImages(searchQuery, currentPage);\n      loadMoreButton.style.display = 'block';\n      const imageGallery = renderImageGallery(images.hits);\n      imageGallery.forEach(imageCard => {\n        gallery.appendChild(imageCard);\n        lightbox.refresh();\n      });\n\n    const loaderSpinner = document.querySelector('.loader');\n    if (images.hits.length < imagesPerPage) {\n      loadMoreButton.style.display = 'none';\n    }\n    if (images.hits.length === 0) {\n      iziToast.error({\n        title: 'No results',\n        titleColor: 'white',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        iconUrl: iconReject,\n        backgroundColor: '#EF4040',\n        messageColor: 'white',\n        timeout: 3000,\n      });\n      loader.style.display = 'none';\n      document.querySelector('#search-input').value = '';\n    }\n    if (loaderSpinner) {\n      loaderSpinner.remove();\n      loadMoreButton.style.display = 'none';\n      loader.style.display = 'none';\n      document.querySelector('#search-input').value = '';\n      lightbox.refresh();\n    }\n    // остання сторінка\n    if ( images.totalHits <= currentPage * imagesPerPage && images.totalHits > 0) {\n      iziToast.error({\n        message:\n          'We are sorry, but you have reached the end of search results.',\n        position: 'topRight',\n        iconUrl: iconReject,\n        backgroundColor: '#EF4040',\n        messageColor: 'white',\n        timeout: 3000,\n      });\n      loadMoreButton.style.display = 'none';\n      document.querySelector('#search-input').value = '';\n      return;\n    }\n    if (images.hits.length > 0) {\n      loadMoreButton.style.display = 'block';\n      loader.style.display = 'none';\n    }\n  } catch (error) {\n    iziToast.error({ message: error.message, });\n    loadMoreButton.style.display = 'none';\n  } finally {\n    document.querySelector('#search-input').value = '';\n  }\n});\n\n\nasync function onLoadMore () {\n    loader.style.display = 'block';\n    loadMoreButton.style.display = 'block';\n    currentPage += 1;\n    try {\n    const images = await fetchImages(searchQueryGlobal, currentPage);\n    const imageGallery = renderImageGallery(images.hits);\n    imageGallery.forEach(imageCard => {\n      gallery.appendChild(imageCard);\n    });\n    const imageCard = document.querySelector('.image-card');\n    const imageCardHeight = imageCard.getBoundingClientRect().height;\n    window.scrollBy({\n      left: 0,\n      top: imageCardHeight * 0.9,\n      behavior: 'smooth',\n    });\n    lightbox.refresh();\n    loader.style.display = 'none';\n    // остання сторінка\n    if (images.hits.length < imagesPerPage) {\n      iziToast.error({\n        message:\n          'We are sorry, but you have reached the end of search results.',\n        position: 'topRight',\n        iconUrl: iconReject,\n        backgroundColor: '#EF4040',\n        messageColor: 'white',\n        timeout: 3000,\n      });\n      loadMoreButton.style.display = 'none';\n    }\n  } catch (error) {\n    iziToast.error({\n      message: error.message, \n      });\n    loadMoreButton.style.display = 'none';\n  } \n  }\n"],"names":["iconReject","API_KEY","fetchImages","searchQuery","page","axios","iziToast","renderSearchForm","searchForm","searchInput","searchButton","renderImageGallery","images","image","imageCard","imageElement","info","likes","views","comments","downloads","renderLoadMoreButton","loadMoreButton","renderLoader","loader","main","gallery","onLoadMore","lightbox","SimpleLightbox","currentPage","searchQueryGlobal","imagesPerPage","event","loaderSpinner","error","imageCardHeight"],"mappings":"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"}